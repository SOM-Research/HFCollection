<!DOCTYPE html>
<html lang="en">
    <head>
        <title>HFCommunity</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="HFCommunity recovers valuable information of the Hugging Face repositories alongside its Git commit history.">
        
        <link rel="icon" type="image/x-icon" href="resources/figs/favicon.ico">

        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

        <!-- Load c3.css -->
        <link href="resources/c3/c3.css" rel="stylesheet">

        <!-- Load d3.js and c3.js -->
        <script src="resources/c3/d3-5.8.2.min.js" charset="utf-8"></script>
        <script src="resources/c3/c3.min.js"></script>

        <link href="resources/css/style.css" rel="stylesheet" media="screen">
        <link href='https://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css'>
    </head>
    <body style="padding-top: 70px;">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-LTWE41R3PF"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-LTWE41R3PF');
        </script>

        <nav class="navbar navbar-expand-lg bg-light fixed-top">
            <div class="container">
                
                <a class="navbar-brand" href="index.html">
                    <img style="float: left; padding-right: 10px; padding-top: 5px; width: 45px;" src="resources/figs/HFCommunity_logo.svg"/>
                    <span class="align-middle">HFCommunity</span>
                </a>  
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li>
                            <button type="button" class="btn btn-default" onClick="location.href='docs/index.html'">
                              <img style="width: 20px;" src="resources/figs/readthedocs_icon.png">
                              Technical Docs
                            </button>
                        </li>
                        <li>
                          <button type="button" class="btn btn-default" onClick=" window.open('https://github.com/SOM-Research/HFCommunity','_blank')">
                            <img style="width: 20px;" src="resources/figs/github.svg">
                            View on Github
                          </button>
                        </li>
                      </ul>
                </div>

            </div>
        </nav>

        <div class="container">
            
            <div class="row d-flex justify-content-center mb-5">
        
                <div class="col-9">
                    <h3>Metrics from our dataset</h3>
                    <p>
                        Thanks to HFCommunity, we can extract interesting metrics from our data. In the following we show some basic examples of the metrics that can be extracted from our dataset.
                    </p>
                    <p>
                        (All graphs and results in this page were calculated on Sept 1, 2022)
                    </p>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                
                <div class="col-5">
                    <h5>Which organization is the most active?</h5>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <h5>How many files does a repository usually have?</h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-5">
                    <p>
                        It is interesting to know which organization is the more active one creating models in Hugging Face. In the following chart we can see that this organization is huggingtweets, but there are other well-known names too, such as Google or Facebook.
                    </p>
                </div>

                <div class="col-1"></div>

                <div class="col-5">
                    <p>
                        Here we show the number of files a repository usually has. For example, the first case tells that 14.8% of all repositories in the Hugging Face Hub have only 1 file, which may reveals toy or test projects.
                    </p>
                    
                </div>
                
            </div>
            <div class="row d-flex justify-content-center mb-5 mt-3">
                <div class="col-5">
                    <div id="bar_chart"></div>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <div id="donut_chart"></div>
                    
                    <!-- <input type="button" onclick="printDiv('donut_chart')" value="print a div!"/> -->
                </div>
            </div>

            <div class="row d-flex justify-content-center">
                
                <div class="col-5">
                    <h5>How often a file is modified in a repository?</h5>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <h5>Does it have an associated <i>paperwithcode</i>?</h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-5">
                    <p> <!--Repo: harr/distilbert-base-uncased-finetuned-ingredients-->
                        When analyzing repositories in code hosting platforms, one thing usually overlooked is which files are more often modified. This could give us a hint of how the work is organized. As example, the following table represents a heatmap of file modifications in the repository model: <a href="https://huggingface.co/harr/distilbert-base-uncased-finetuned-ingredients" target="_blank">distilbert-base-uncased-finetuned-ingredients</a>.
                    </p>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <p>
                        Some dataset repositories have an associated <a target="_blank" href="https://paperswithcode.com/"><i>paperwithcode</i></a> element. This platform is used to upload the code of a research/white paper so it is easier to replicate the work.
                    </p>
                </div>
            </div>
            <div class="row d-flex justify-content-center mb-5 mt-3">
                <div class="col-5">
                    <div class="text-center">
                        <img src="resources/figs/heatmap.png" class="w-50" alt="example metric 3">
                    </div>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <div id="pie_chart"></div>
                </div>                
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-5">
                    <h5>How many repositories have discussions?</h5>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <h5>How discussions are used?</h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-5">
                    <p>
                        One key aspect of the Hugging Face Hub, and recently added, is the <a target="_blank" href="https://huggingface.co/docs/hub/repositories-pull-requests-discussions">pull requests and discussions</a>. This feature enables the collaboration among all community members. But as we see in the following chart, very few repositories leverage on this functionality.
                    </p>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <p>
                        As we have seen, few projects draw on discussions. Besides analyzing the use of discussions, another interesting metric is how much these discussions are exploited. Here we show the number of repositories grouped by the number of discussions and comments. As we can see, most repositories only have one thread of discussions.
                    </p>
                </div>
            </div>
            <div class="row d-flex justify-content-center mb-5 mt-3">
                <div class="col-5">
                    <div id="gauge"></div>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <div id="donut_chart_discussions"></div>
                </div>
            </div>

            <div class="row d-flex justify-content-center">    
                <div class="col-5">
                    <h5>How many comments have discussions in the Hub?</h5>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <h5>How many discussion threads are not created by the owner?</h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-5">
                    <p>
                        We have seen that most repositories have just one discussion, but another element to consider are the comments in the threads of discussions. Hence, we show how many comments by average have the discussions in each repository.
                    </p>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <p>
                        Another relevant detail about discussions is who create them. Here we are trying to detect whether the discussions are started by the owner of the repository or not. As we can see, the vast majority of discussions are not created by the owner. The chart is visualized using a logarithmic scale.
                    </p>
                </div>
            </div>
            <div class="row d-flex justify-content-center mb-5 mt-3">
                <div class="col-5">
                    <div id="bar_chart_comments"></div>
                </div>
                <div class="col-1"></div>
                <div class="col-5">
                    <div id="bar_chart_disc_auth"></div>
                </div>
            </div>

        </div>
        
        <footer>
            <div class="container">
              <div class="row">
                <div class="col-12">  
                    <p class="text-center"><small>HFCommunity made with &#9829; at <a href="https://som-research.uoc.edu" target="_blank">SOM-Research Lab</a></small> </p>
                    <p class="text-center"><small>Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></small></p>
                </div>
              </div>
              <div class="row">
                <div class="col-12 text-center" style="padding-top: 10px;">
                    <a href="mailto:aait_mimoune@uoc.edu" target="_blank">
                        <img src="resources/figs/white-mail-icon.png" class="footer-icon"></a>
                    <a href="https://github.com/ademait" target="_blank">
                        <img src="resources/figs/github-icon.png" class="footer-icon"></a>
                    <a href="https://www.linkedin.com/in/adem-ait-fonoll%C3%A0-91bba5199/" target="_blank"><img src="resources/figs/linkedin-color-icon.png" class="footer-icon">
                    </a>
                    
                </div>
              </div>
            </div>
        </footer>
    </body>

    <script type="text/javascript">

    var chart_1 = c3.generate({
        bindto: '#bar_chart',
        data: {
            columns: [
              ['num models',2904, 2402, 1384, 1125, 592, 564, 461, 379, 319, 309],
            ],
            type : 'bar',

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        axis: {
            x: {
                type: 'category',
                categories: ['huggingtweets', 'Jeevesh8', 'Helsinki-NLP', 'jonatasgrosman', 'huseinzol05', 'DOOGLAK', 'CEBaB', 'google', 'facebook', 'masakhane'],
                tick: {
                    rotate: 75,
                    multiline: false
                },
            }
        }
    });

    var chart_2 = c3.generate({
        bindto: '#donut_chart',
        data: {
            columns: [
                ['1'    , 13043],
                ['2-5'  , 24672],
                ['6-10' , 31065],
                ['11-15', 12832],
                ['16-50',  5227],
                ['>50 ' ,  1134],
            ],
            type : 'donut',

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        donut: {
            title: "Repos per num of files"
        }
    });

    var chart_4 = c3.generate({
        bindto: '#pie_chart',
        data: {
            columns: [
                ['yes'  ,  596],
                ['no'   , 7291],
            ],
            type : 'pie',

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
    });

    var chart_5 = c3.generate({
        bindto: '#gauge',
        data: {
            columns: [
                ['model', (1632/61508*100).toFixed(4)],
                ['dataset', (704/7887*100).toFixed(4)],
                ['space', (465/7691*100).toFixed(4)],
            ],
            type: 'gauge',
            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        size: {
            height: 250
        }
    });

    var chart_6 = c3.generate({
        bindto: '#donut_chart_discussions',
        data: {
            columns: [
                ['1'   , 2284],
                ['2-5' ,  460],
                ['6-10',   42],
                ['>10' ,   15],
            ],
            type : 'donut',

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        donut: {
            title: "Repos per num of discussions"
        },
        size: {
            height: 350,
        }
    });

    var chart_7 = c3.generate({
        bindto: '#bar_chart_comments',
        data: {
            columns: [
                ['num_comments', 1955, 98, 26, 359, 321, 42],
            ],
            type : 'bar',

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        axis: {
            x: {
                type: 'category',
                categories: ['1', '(1,1.5]', '(1.5,2)', '2', '(2,5]', '(5,12]'],
            }
        }
    });

    var chart_8 = c3.generate({
        bindto: '#bar_chart_disc_auth',
        data: {
            columns: [
                ['num_discussions', 0.48, 1, 0.78, 3.41],
            ],
            type : 'bar',
            labels : {
                    show:true,
                    format: {
                        num_discussions : function(d,id){console.log(id, Math.pow(10,d));return Math.pow(10,d).toFixed(0);}
                    }
            },

            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        axis: {
            x: {
                type: 'category',
                categories: ['[0,25]', '(25,50]', '(50,100)', '100'],
            }
        },
        
        
    });

    function printDiv(divName) {
        // fix weird back fill
        d3.select('#'+divName).selectAll("path").attr("fill", "none");
        //fix no axes
        d3.select('#'+divName).selectAll("path.domain").attr("stroke", "black");
        //fix no tick
        d3.select('#'+divName).selectAll(".tick line").attr("stroke", "black");
        // fix text going off the export (becuase my labels font size is larger than default)
        d3.select('#'+divName+"> svg").style("font-size","12px");
        // add any other styles needed
        var printContents = document.getElementById(divName).innerHTML;
        document.body.innerHTML = printContents;
        window.print();
        window.location.reload();   
    }


    </script>
    
</html>